<!-- extends from base.html -->
{% extends 'blog/base.html'%}

<!-- title -->
{% block title %}Post_all{% endblock %}

<!-- contents -->
{% block content %}

<div id="main">
    <!-- Post -->
    <section class="post">
        <header class="major">
            <!-- <span class="date">{{ object.modify_dt|date:'j F Y' }}</span> // 오늘 날자 쓸수 있으면 좋겠다-->
            <h2> POST LIST </h2>
            <ul class='nav justify-content-center'  >
            <li class="nav-item"><h3><a href="{% url 'blog:post_archive' %}"><i class="fas fa-landmark"></i></i>&nbsp;archive &nbsp;</a></h3></li>
            <li class="nav-item"><h3><a href="{% url 'blog:add' %}"><i class="fa fa-plus"></i>&nbsp;add &nbsp;</a></h3></li>
            <li class="nav-item"><h3><a href="{% url 'blog:change' %}"><i class="fas fa-edit"></i>&nbsp;change &nbsp;</a></h3></li>
            </ul>
            <p>
            메모 : 여기에 작성자면 삭제하게 만들기 -> 그러면 페이지 수 줄 일수 있음 
            </p>
        </header>

        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        
                        <th>Title</th>
                        <th>User</th>
                        <th>Category</th>
                        <th>Description</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for post in posts %}
                    <tr>
                        <td><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></td>
                        <td>{{ post.owner }}</td>
                        <td>{{ post.category }}</td>
                        {% comment %} <td><a href="{{ post.category }}">{{ post.category }}</a></td> {% endcomment %}
                        <td>{{ post.description }}</td>
                        <td>{{ post.modify_dt|date:'N d, Y' }}</td>
                        {% endfor %}
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
      
    <!-- pagination -->
    <footer>
        <div class="pagination">
            <!-- Prev page setting -->
            {% if page_obj.has_previous %}
                <a href="?page={{ page_obj.previous_page_number }}" class="previous">Prev</a>
            {% endif %}

            <!--  main : page pagination   -->
            {% for page_number in page_obj.paginator.page_range %}
            <!-- pagination lv control  -->
                {% if page_number >= page_obj.number|add:-5 and page_number <= page_obj.number|add:5 %}
                <!-- page number match-->
                    {% if page_number == page_obj.number %}
                    <li class="page-item active" >
                        <a class="page" href="?page={{ page_number }}">{{ page_number }}</a>
                    </li>
                    {% else %}
                    <li class="page-item">
                        <a class="page" href="?page={{ page_number }}">{{ page_number }}</a>
                    </li>
                    {% endif %}
                {% endif %}
            {% endfor %}

            <!-- next page setting -->
            {% if page_obj.has_next %}
            <!-- 마지막 page -->
                <!-- <a href="?page={{ page_obj.paginator.num_pages }}" class="page">{{ page_obj.paginator.num_pages }}</a> -->
                <!-- 바로 다음 page -->
                <a href="?page={{ page_obj.next_page_number }}" class="next">Next</a>
            {% endif %}
        </div>
    </footer>
</div>

{% endblock %}


